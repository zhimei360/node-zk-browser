<head>
	<meta charset="utf-8">
	<title>Free HTML5 Bootstrap Admin Template</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
	<meta name="author" content="Muhammad Usman">

	<!-- The styles -->
	<link id="bs-css" href="css/bootstrap-cerulean.css" rel="stylesheet">
	<style type="text/css">
	  body {
		padding-bottom: 40px;
	  }
	  .sidebar-nav {
		padding: 9px 0;
	  }
	</style>
	<link href="css/bootstrap-responsive.css" rel="stylesheet">
	<link href="css/charisma-app.css" rel="stylesheet">
	<link href="css/jquery-ui-1.8.21.custom.css" rel="stylesheet">
	<link href='css/chosen.css' rel='stylesheet'>
	<link href='css/uniform.default.css' rel='stylesheet'>
	<link href='css/colorbox.css' rel='stylesheet'>
	<link href='css/jquery.noty.css' rel='stylesheet'>
	<link href='css/noty_theme_default.css' rel='stylesheet'>
	<link href='css/elfinder.min.css' rel='stylesheet'>
	<link href='css/elfinder.theme.css' rel='stylesheet'>

	<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- The fav icon -->
	<link rel="shortcut icon" href="img/favicon.ico">
		
</head>
<script type="text/javascript" src="lib/jquery.js"></script>
<script type="text/javascript" src="jquery.tree.js"></script>
<script type="text/javascript" language="javascript">
  <!--
     String.prototype.endsWith = function(suffix) {
  	   return this.indexOf(suffix, this.length - suffix.length) !== -1;
	 };
        $(function () {
            $.ajaxSetup({cache:false});
            $("#zkTree").tree({
                  data : {
                    type : "json",
                    async : true,
                    opts : {
                        method : "get",
                        url : "/node-zk/children"
                    }
                 },//end data
                 ui:{
                     theme_name : "classic"
                 },
                 lang:{
                 loading : "目录加载中……"
             },
                 types :{
                    "default" : {
                        draggable : false
                    }
                 },
             callback : {
                 beforedata : function(node,tree_obj){
                        var rootPath= '<%= path %>';
                        return {path :  $(node).attr("path") || rootPath,rel : $(node).attr("rel")};
                },
                onselect : function(node,tree_obj){
                         var test = $(node).children("a").attr("href");
                         $(parent.document.body).find('#content').attr('src', test);
                },
                onsearch : function(node, tree_obj) {
                    tree_obj.container.find(".search").removeClass("search");
                    node.addClass("search");
                }
            } //end callback
            });
        });
         function searchnodes(){
            var searchPath=$('#search_path').val();

            window.location.href='/node-zk/tree?path='+searchPath;
            $(parent.document.body).find('#content').attr('src', "/node-zk/get?path="+searchPath);
         }
    //-->
</script>
        <div id="container">
        	 <!-- <span class="fc-header-title"><h2>配置节点管理</h2></span> -->
        	 <br/>
             <div>
                 <input type="text" id="search_path" value='<%= path %>'/><br/>
                 <!--<input class="btn btn-primary" type="button" id="search_op" onclick="searchnodes()" value="查找节点" />-->
                 <a href="/node-zk/create" class="btn btn-primary" target="content">创建应用</a>
             </div>
              <br/>
             <div id="zkTree"></div>
        </div>
